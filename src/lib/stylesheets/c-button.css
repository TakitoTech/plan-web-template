@layer base {
    :root {
        --_color-bg: var(--theme-base-1);
        --_color-border: color-mix(in srgb, var(--theme-base-border) 90%, var(--theme-base-fg-2));
        --_color-text-disabled: oklch(from var(--theme-base-1) calc(l - 0.3) c h);
        --_color-bg-disabled: oklch(from var(--theme-base-1) calc(l - 0.04) 0 h);
    }

    :root[data-theme='dark'] {
        --_color-text-disabled: oklch(from var(--theme-base-1) calc(l + 0.3) c h);
        --_color-bg-disabled: oklch(from var(--theme-base-1) calc(l + 0.04) c h);

        --_color-bg: color-mix(in srgb, var(--theme-base-1) 98%, var(--theme-base-fg-1));
        --_color-border: color-mix(in srgb, var(--theme-base-border) 90%, var(--theme-base-fg-2));
    }
}

.c-button {
    width: 100%;
    padding: theme('size[2]') theme('size[4]');
    font-weight: 500;
    border: none;
    border-radius: theme('borderRadius.lg');
    transition:
        background-color 50ms ease-in-out,
        color 50ms ease-in-out,
        box-shadow 50ms ease-out;
    &.c-button-filled {
        box-shadow: 0 1px 1px rgb(0 0 0 / 0.05);
    }
}

.c-button--primary {
    &:where(:not(.c-button--filled)) {
        color: var(--theme-primary-1);
        &:not(:disabled):hover {
            background-color: var(--theme-base-hover);
        }

        &:not(:disabled):active {
            background-color: var(--theme-base-active);
        }

        &:disabled {
            color: var(--theme-base-fg-disabled);
        }
    }

    &:where(:focus-visible) {
        outline: none;
        @apply ring ring-primary-3 ring-offset-1 ring-offset-base-1 outline-none;
    }

    &:where(.c-button--filled) {
        color: var(--theme-primary-fg-1);
        background-color: var(--theme-primary-1);

        &:hover {
            background-color: var(--theme-primary-2);
        }

        &:active {
            background-color: var(--theme-primary-3);
        }

        &:disabled {
            color: var(--_color-text-disabled);
            background-color: var(--_color-bg-disabled);
        }

        &:focus-visible {
            outline: none;
            @apply ring ring-primary-3 ring-offset-1 ring-offset-base-1 outline-none;
        }
    }

    &:where(.c-button--outline) {
        border: 1px solid var(--theme-primary-border);
    }
}

.c-button--negative {
    &:where(:not(.c-button--filled)) {
        color: var(--theme-negative-1);
        &:not(:disabled):hover {
            background-color: color-mix(in oklch, var(--theme-negative-1) 5%, transparent);
        }

        &:not(:disabled):active {
            background-color: color-mix(in oklch, var(--theme-negative-1) 8%, transparent);
        }

        &:disabled {
            color: var(--theme-base-fg-disabled);
        }
    }

    &:where(:focus-visible) {
        outline: none;
        @apply ring ring-negative-3 ring-offset-1 ring-offset-base-1 outline-none;
    }

    &:where(.c-button--filled) {
        color: var(--theme-negative-fg-1);
        background-color: var(--theme-negative-1);

        &:hover {
            background-color: var(--theme-negative-2);
        }

        &:active {
            background-color: var(--theme-negative-3);
        }

        &:disabled {
            color: var(--_color-text-disabled);
            background-color: var(--_color-bg-disabled);
        }

        &:focus-visible {
            outline: none;
            @apply ring ring-negative-3 ring-offset-1 ring-offset-base-1 outline-none;
        }
    }

    &:where(.c-button--outline) {
        border: 1px solid var(--theme-negative-border);
    }
}

.c-button--positive {
    &:where(:not(.c-button--filled)) {
        color: var(--theme-positive-1);
        &:not(:disabled):hover {
            background-color: color-mix(in oklch, var(--theme-positive-1) 5%, transparent);
        }

        &:not(:disabled):active {
            background-color: color-mix(in oklch, var(--theme-positive-1) 8%, transparent);
        }

        &:disabled {
            color: var(--theme-base-fg-disabled);
        }
    }

    &:where(:focus-visible) {
        outline: none;
        @apply ring ring-positive-3 ring-offset-1 ring-offset-base-1 outline-none;
    }

    &:where(.c-button--filled) {
        color: var(--theme-positive-fg-1);
        background-color: var(--theme-positive-1);

        &:hover {
            background-color: var(--theme-positive-2);
        }

        &:active {
            background-color: var(--theme-positive-3);
        }

        &:disabled {
            color: var(--_color-text-disabled);
            background-color: var(--_color-bg-disabled);
        }

        &:focus-visible {
            outline: none;
            @apply ring ring-positive-3 ring-offset-1 ring-offset-base-1 outline-none;
        }
    }

    &:where(.c-button--outline) {
        border: 1px solid var(--theme-positive-border);
    }
}

.c-button--base {
    &:where(:not(.c-button--filled)) {
        &:not(:disabled):hover {
            background-color: var(--theme-base-hover);
        }

        &:not(:disabled):active {
            background-color: var(--theme-base-active);
        }

        &:disabled {
            color: var(--_color-text-disabled);
        }
    }

    &:where(:focus-visible) {
        outline: none;
        @apply ring ring-base-3 ring-offset-1 ring-offset-base-1 outline-none;
    }

    &:where(.c-button--filled) {
        background-color: var(--_color-bg);

        &:hover {
            background-color: var(--theme-base-hover);
        }

        &:active {
            background-color: var(--theme-base-active);
        }

        &:disabled {
            color: var(--_color-text-disabled);
            background-color: var(--_color-bg-disabled);
        }

        &:focus-visible {
            outline: none;
            @apply ring ring-base-3 ring-offset-1 ring-offset-base-1 outline-none;
        }
    }

    &:where(.c-button--outline) {
        border: 1px solid var(--_color-border);
    }
}

.c-button--sm {
    font-size: theme('fontSize[sm]');
    padding-block: theme('padding[0.5]');
}
